# 管理控制台使用指南

标签（空格分隔）： DroiBaas 控制台   使用指南

---

## 创建应用
对于刚接触DroiBaaS的用户来说，看到的控制台界面多数如下图所示：
![image.png-424.2kB][1]
这里显示的内容已经很清晰，用户很容易就能进行基本的操作

1. 通过箭头1指示的按钮，可以新建应用。
2. 已经创建好的应用显示在箭头2指示的区域，该区域显示了一些基本的统计数据，点击应用管理可以进入单个应用的应用管理界面，点击数据分析可以快速进入数据管理界面。
3. 在箭头3指示的搜索框可以快速查找已经创建好的某一应用。
4. 箭头4指向的是DroiBaaS官网的链接。
5. 箭头5指向的是与开发者账户相关的操作链接。


## 开发环境说明
开发环境分为沙箱环境和生产环境，如下图中箭头所指的位置可以快速切换开发环境：
![image.png-407.1kB][2]
* 沙箱环境：此环境是为了开发与调试所提供的环境，它与生产环境相互隔离，但具有生产环境几乎完全相同的功能，项目开发结束后迁徙到生产环境。

* 生产环境：应用创建完成后可以发布到生产环境，指正式对外提供服务的真实环境。

## 应用管理中心
根据上文所述，在单个应用卡中点击应用管理可以快速进入应用管理中心界面，进行相应的操作：
![image.png-440.1kB][3]
这里主要划分四块区域内容：
* 区域1 显示所选择的应用名称，在此可以快速切换应用（点击应用名称）。
* 区域2 按照服务类型，将应用数据进行了一级分类。主要分为开发环境说明、应用管理中心和数据分析中心。
* 区域3 则是一级分类下，具体数据、具体功能的二级菜单。
* 区域4 展示具体的数据和结果。

下面重点看下各分类的具体内容和操作。

### 云控中心
#### 云数据
云数据是 DroiBaaS 提供的数据存储服务，它建立在对象 DroiObject 的基础上，所有 DroiObject 均存储在云端上。您可以通过 Android Core SDK 对其进行操作，也可在 DroiBaaS 后台管理所有的对象。包含数据库、用户列表（_User）、用户群组（_Group)以及文件存储（_File)；关于如何使用DroiBaaS提供的云端数据库和文件存储，请参阅以下文档：Android开发指南或iOS开发指南。

特别地，对以上数据管理可以在控制台完成，简易步骤如下：
创建Class
进入控制台->云控中心->云数据，该界面点击Code右侧的下拉框，点击Add Class即可为应用添加Class，如下图所示：
![image_1bhrfaa0khep142u1jsq1fig9fb9.png-48.4kB][4]
如下弹框中输入符合条件的Class Name后，点击确定即可完成：
![image_1bhrfaoa062i1vvb11gnt5o16vjm.png-21.6kB][5]
##### 本地数据导入
如上图可以在云数据下找到【数据导入】选项。
> 由于云数据默认是UTF-8编码，直接在Excel中打开中文会出现乱码，需转换为ANSI编码。

##### 本地文件格式要求：
*	必须是CSV 文件
*	UTF-8 文件编码
*	单个文件大小不能超过 30 MB。超大文件要拆分为小于 30 MB 的多个文件进行导入，只要使用同一个「Class 名称」，数据就会导入到一个表中。

##### CSV格式文件
导入Class的CSV文件格式必须符合我们的扩展要求：
*	第一行是字段名称
*	第二行开始是要导入的数据

```
Id,name,age
3f7c01e7d8e28483da3483c0,zhangwei,14
3f8d01e79e30ba810062199e,liheng,15
402501e7085234730aa433b0,zhaojun,14
402601e71127e5d0a3c9f4dd,hanxiao,14
402601e7bed0da212002393e,xiaojie,16

```
##### 云数据导出到本地

如上图可以在云数据下找到【数据导出】选项。

><font color=#FF0000>云数据默认为UTF-8编码，导出的CSV文件直接在Excel打开中文会出现乱码，需转为ANSI编码。</font>

##### 权限设置
如上图可以在云数据下找到【权限设置】选项。

* 权限范围包括所有人，指定用户，或群组对指定Class的读写权限设置。
* 步骤：选定指定对象和权限->确认添加->修改。

可以授权访问的用户类型有如下三种：
* 所有用户（表示所有 User 对象，包括匿名用户在内，都拥有访问权限）
* 指定群组（表示指定的群组里的User拥有访问权限）
* 指定用户（表示只有少数固定的 User 拥有访问权限）

##### 清理Class
如上图可以在云数据下找到【删除Class】选项。

删除 Class：除了所有数据（包含索引）之外，这会连 Class 元信息也一并删除。

对于每一个 Class，允许对如下几种操作分别授予用户操作权限：
  * 添加行
  * 添加列
  * 删除行
  * 刷新
  * 根据条件查询记录

如下图，可以对test表做以上各种操作，操作数据显示在箭头指示的区域：
![image_1bhrfbapnfhc1tvt51u1qmu197k13.png-33.8kB][6]

#### 云代码
云代码是部署运行在 DroiBaaS云引擎上的代码，您可以用它来实现较复杂的，需要运行在云端的业务逻辑。从客户端执行 DroiBaaS 云代码，使用基础类 DroiCloud 并结合基础类 DroiObject 来定义输入以及输出即可操作云代码。

详情参看：[云代码](https://www.droibaas.com/Index/document.html)
示例如下图所示：</br>
![image_1bhrfc62n13lo1nhlpjn1ji3lb81g.png-213.3kB][7]


#### 云引擎
云引擎让您可以通过WEB控制台，立刻执行，按照计划执行或使用条件触发执行特定的云代码。

云引擎中支持实时任务/计划任务/Hook任务，可以在控制台->云控中心->云引擎，进行设置，详细操作流程如下：

例如：实时任务的创建与执行步骤，如下图：

* 箭头1 显示三种不同的任务，点击相应的任务名称可以快速切换任务；
* 箭头2 点击此按钮可以创建实时任务；
* 箭头3 指示区域显示已经创建完成的任务；
* 箭头4 指示具体创建实时任务；</br>
![image_1bhrfcju6ke01jm2g26gb410l61t.png-32.9kB][8]
![image_1bhrfcuio97v1se81p4au1t1nc32a.png-19.3kB][9]

#### 云日志
记录执行过程中的日志，便于开发者分析问题。

步骤：云日志->开始。

#### 云参数 
云参数是一个全域只读的设置，可供应用程序使用，这个设置是个Key/Value形式。开发者对其进行设置后可在应用程序内读取。通过使用这一个功能可以做到让应用程序即时调整。

步骤：云参数->添加云参数->输入参数名->输入参数类型->输入与参数类型对应的值->添加。

### API服务
* 基本API：此功能用于添加开发者所需的api接口，为用户提供便捷服务。
* 进阶API：卓易超管后台已添加的api显示在进阶API界面，用户在此购买需要使用的api接口。
* 我的API：用户已购买的api接口显示在该界面，并记录各接口的使用情况。

基本API创建步骤：API服务->基本API->添加API->输入API名称->选择API类型->选择CloudCode路径->选择网络请求方式->输入URI->选择APIKey->添加

* API名称：自定义。（例如：GetResult）
* 接口类型，CloudCode路径，Method,APIKey根据实际情况选择。
* URI：自定义。（例如：getresult）可在API列表->操作->详情->接口测试，查看完整API，并进行测试。

### 应用推送
* 推送通知：此功能让您可以通过WEB控制台向选中的在线设备推送通知消息。
* 通知记录：用以查看发送通知消息的记录及相关结果。
* 透传消息：可以通过WEB控制台向选中的在线设备推送可供设备自行处理的透传消息。
* 透传消息记录：用以查看发送透传消息的记录及相关结果。

特别地，这部分功能可以在控制台完成相应的操作：
控制台->应用推送->推送通知，进行普通消息推送
![image_1bhrfebkvq9fdjaujs162039i2n.png-75.1kB][10]

* 平台：平台支持Android和iOS，用户根据需求选择相应的平台。
* 通知栏样式：支持默认和图片两种方式；默认的情况通知消息是以文字形式展示，图片样式是指通知消息以图片的方式展示。
* 图标：支持默认和自定义图标两种形式；默认图标是指通知消息是公司默认的图标，自定义图标是指用户可以自己选择通知图标。
* 展开式通知：支持禁用和大图两种方式；禁用指禁止展开消息，大图指消息图标能展开。

* 后续动作：支持打开应用、打开指定网页、打开指定activity以及下载应用；打开应用是指点击通知消息会打开推送应用；打开指定网页是指点击通知消息会打开指定的网页；下载应用是指点击通知消息会下载指定的应用。

* 提醒方式：支持声音、振动、呼吸灯以及可清除；可清除是指消息通知是否允许清除。

* 发送给：支持发送给单个用户、特定用户、所有人以及用户标签。

* 发送时间：支持立即发送和定时发送；立即发送时指消息立即推送出去，客户端能立即展示通知消息；定时发送是指推送消息到指定的时间才能发送出去。

* 离线时间：是指消息的离线时间，设置离线时间要大于当前时间。

* 展示类型：支持展示一次、循环显示和定时显示；显示一次是指客户端推送消息只展示一次；循环显示是指客户端循环展示推送消息；定时显示是指客户端在设置的时间段内展示推送消息。

控制台->应用推送->通知记录，查看已经发送过的消息记录：

* 箭头1/箭头2 指示的是搜索条件，用户可根据一定的条件查询相应的推送记录。

* 箭头3 指示区域显示查询出的推送记录。</br>
![image_1bhrff51pj6t1tdvbd51vk11t3934.png-37kB][11]

控制台->应用推送->透传消息/透传消息记录，进行透传消息推送/查询已发送的透传消息，
透传消息的各字段内容解释以及查询透传消息记录请参见普通推送消息，此处省略。


### 账号服务
* 第三方登录：使用DroiUser账号框架快速搭建您自己的账号系统后，还可以快速轻松的接入多种第三方登录，请首先至第三方登录授权网站开通相关服务并获取对应的授权信息。
* 卓易授权：授权第三方通过OAuth使用搭载在过亿部智能终端产品的的卓易账号进行登录。

#### 第三方登录
* 平台目前支持的d第三方登录为QQ，微信，新浪微博。
* 用户根据自己的需要，去相应的平台申请相应的参数。
* 步骤：账户服务->第三方登录->选择相应的第三方平台编辑->输入参数->保存

#### 卓易授权

步骤：账户服务->卓易授权->开启->输入申请理由->开启

### 自更新
* 更新设置：应用更新帮助开发者将应用升级到最新版本，可以让存量用户体验到应用的最新版本。由于iOS系统限制，目前暂时只提供Android版本的相关功能。
* 渠道设置：正常情况下，系统会自动获取所有终端设备的渠道信息。由于网络原因或数据传输延迟可能导致部分渠道信息更新不及时，特提供手动维护渠道信息的功能，方便您及时将最新版本更新到相关设备上。

这部分功能可以在控制台完成：

控制台->自更新->渠道设置，进行添加渠道 如下图示例：
* 箭头1 点击此处即可添加渠道；
* 箭头2 已添加的渠道显示在此区域；
* 箭头3 指示具体如何添加渠道。
><font color=#FF0000>注意：添加渠道时，渠道名称和渠道ID唯一</font>

![image_1bhrfg2nfv2rllh1i231f8h6j53h.png-44.8kB][12]
![image_1bhrfgb0qn3jld41ff61mmgo0c3u.png-13.8kB][13]

控制台->自更新->更新设置，进行添加更新，如下图示例：

![image_1bhrfgo891nlb1qql1o1lmvh1qtb4b.png-38.6kB][14]
![image_1bhrfgv5r1ok1fu1sqe5251cqu4o.png-30.6kB][15]
* 箭头1 点击此处可添加更新；
* 箭头2 已添加的更新显示在此区域；
* 箭头3 添加更新时具体的操作。

* 更新类型：支持应用更新和文件更新两种类型。
* 更新策略：支持提示、强制和静默更新；提示更新是指若有最新版本时会弹出版本更新提示，用户更新与否可以自己选择；强制更新是指必须选择更新否则应用就不能使用；静默更新是指不会给用户更新提示而自动升级程序至最新版本。
* 文件：当更新类型选择应用时此处要上传apk应用；当更新类型选择文件时此处要上传相应的文件。
* 渠道：指更新渠道。
* 更新日志：此处用户可以描述更新的内容。

### 用户反馈
使用DroiBaaS快速建立用户反馈系统，可以让您轻松建立起与用户沟通的桥梁。DroiBaaS控制台界面如下：
![image_1bhrfhr4kqimoem1apladge5q55.png-19kB][16]
客户端用户反馈的意见会显示在上图反馈列表中，相关人员可以针对该条意见回复用户；
今日用户反馈的意见数、今日回复的数目以及总的反馈数量都会显示在图表中。

### 应用设置
#### 设置详情
使用DroiBaaS提供的强大应用管理功能可以让您实现多开发者协作，沙箱环境（Sandbox）与生产环境（Production）的切换，云代码版本管理等强大的功能。
部署生产环境：可以将应用部署到生产环境。
编辑详情：可以修改应用名称、应用图标、增加应用描述、上传IOS证书等操作。
协作者设置：可为为该应用添加写作者账号，添加后写作者可以对该应用做相关操作。同时可以分配该协作者不同的操作权限。
安全设置：可为该应用进行相关的安全设置。
删除应用：注意：应用一旦被删除后基于该应用的所有数据都会被清除，故要删除应用时要慎重。

#### 安全密钥
用于在开发过程中可能使用到的各种身份识别信息，请妥善保管，避免泄露信息。 
目前DroiBaaS的安全密钥包括Developer token 、Application ID （沙箱和生产环境）、MasterKey 以及用户创建的ApiKey。


## 数据分析中心
登陆账号>选择应用>数据分析中心 主要包含了七大菜单和趋势介绍：

 - 用户分析：包含了新增用户，活跃用户，沉默用户，启动次数，以及版本分布；
 - 渠道分析：以渠道为统计维度，来分析用户属性；
 - 用户参与度：包含使用时长、使用频率、访问页面、使用间隔；
 - 终端属性：包含设备终端、网络及运营商、地域分析项；
 - 留存分析：包含留存用户及周用户构成；
 - 功能使用：包括自定义事件的统计分析，产品经理可以通过自定义事件做更全面的信息分析；
 - 错误分析：包括错误趋势及错误列表，开发人员可以通过该信息及时定位修复问题；


## 个人中心
在控制台，点击右上角用户名，上下文菜单中选择「个人中心」，可以查看、修改账号及套餐等信息。

### 基本信息
包括修改密码，修改头像，绑定/换绑手机号，绑定/换绑邮箱，编辑个人信息。为了更好的服务开发者，建议您完善开发者信息，填写真实姓名、电话号码。比如：

 - 在关键时刻（服务宕机等意外情况），我们可以及时与您取得联系，做好事故沟通和应对措施
 - 「技术支持 Ticket」里会用到这些信息
 - 发票相关的信息也来自这里

### 财务总览
显示了财务总览，套餐使用情况，套餐外使用情况,同时在这里可以进行更换账单，充值。

### 财务记录
显示了每月账单的金额，类型，用户余额和套餐信息。

### 邀请有礼
显示专属的邀请链接，邀请后可以获得邀请奖励金。

## 我的工单
在控制台，点击右上角用户名，上下文菜单中选择「我的工单」，即可进入我的工单界面。这里可以提交工单以及查看已提交的工单。
如果只是提交工单，您还可以在控制台的右下角点击[提交工单]。


  [1]: http://static.zybuluo.com/boboz/29d50jpsbgedyydm57q9b16e/image.png
  [2]: http://static.zybuluo.com/boboz/i67wrr7ih6zxrp4d7zu7ocoe/image.png
  [3]: http://static.zybuluo.com/boboz/fmzb29g6315lkn2xycys506y/image.png
  [4]: http://static.zybuluo.com/boboz/4jg1llpmpskr1ssn0yql9stq/image_1bhrfaa0khep142u1jsq1fig9fb9.png
  [5]: http://static.zybuluo.com/boboz/zzoi9320jyxvqod74bo98lpw/image_1bhrfaoa062i1vvb11gnt5o16vjm.png
  [6]: http://static.zybuluo.com/boboz/dchwtii7m6w95bigrv6tqg9f/image_1bhrfbapnfhc1tvt51u1qmu197k13.png
  [7]: http://static.zybuluo.com/boboz/cng7ix4tup1vlqqwkinlr0d3/image_1bhrfc62n13lo1nhlpjn1ji3lb81g.png
  [8]: http://static.zybuluo.com/boboz/i6rk0emna4kwjdrzlukydr38/image_1bhrfcju6ke01jm2g26gb410l61t.png
  [9]: http://static.zybuluo.com/boboz/m2py72so42aa195gvjimfud5/image_1bhrfcuio97v1se81p4au1t1nc32a.png
  [10]: http://static.zybuluo.com/boboz/n0agpxcpbh878ii2xz6sty1y/image_1bhrfebkvq9fdjaujs162039i2n.png
  [11]: http://static.zybuluo.com/boboz/4gfug4yugnwyn7zul5qciyj0/image_1bhrff51pj6t1tdvbd51vk11t3934.png
  [12]: http://static.zybuluo.com/boboz/1b3bv229fu2415xqmbezbm8d/image_1bhrfg2nfv2rllh1i231f8h6j53h.png
  [13]: http://static.zybuluo.com/boboz/c45syxr4jusf1nvujtbpal6i/image_1bhrfgb0qn3jld41ff61mmgo0c3u.png
  [14]: http://static.zybuluo.com/boboz/bhh5sfvrm0uc2rd5m5i3lb3e/image_1bhrfgo891nlb1qql1o1lmvh1qtb4b.png
  [15]: http://static.zybuluo.com/boboz/x9upmit11w72g8mrdeug2p2z/image_1bhrfgv5r1ok1fu1sqe5251cqu4o.png
  [16]: http://static.zybuluo.com/boboz/vh9710xvykwvcm9r9nbvlwe8/image_1bhrfhr4kqimoem1apladge5q55.png
  [17]: http://static.zybuluo.com/boboz/voxwst5n8y064iy7j1uj9b5p/image_1bhrficri1c2312ksps6hdm1l5e5i.png
  [18]: http://static.zybuluo.com/boboz/kseiwdy6s6y6wybro3qsvcf9/image_1bhrfmh8pte21qp91a3g11pv1ium5v.png